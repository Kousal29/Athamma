<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Happy Birthday, Athamma</title>
  <meta name="description" content="A tender birthday tribute hero for Athamma — like a second mother — with warmth, gratitude, and love." />
  <!-- Preload hero image for faster first paint -->
  <link rel="preload" as="image" href="https://hebbkx1anhila5yf.public.blob.vercel-storage.com/WhatsApp%20Image%202025-10-04%20at%2010.29.42%20PM-M2wwj33gFrwCi24KtcyLV0eXGHKiWU.jpeg" />

  <style>
    /* Enhanced Color system */
    :root{
      --bg-gradient-start: #FEF6F0;
      --bg-gradient-end: #FDF2E9;
      --bg: #FFF8F1;        /* Ivory */
      --text: #2C2C2C;      /* Charcoal */
      --muted:#8A8A8A;      /* Warm gray */
      --accent:#D4AF37;     /* Soft gold */
      --accent-light: #E6C757;
      --primary:#E76F51;    /* Warm coral */
      --primary-dark: #D35A3C;
      --radius: 18px;
      --shadow: 0 12px 40px rgba(0,0,0,.12);
      --shadow-lg: 0 20px 60px rgba(0,0,0,.15);
      --shadow-xl: 0 30px 80px rgba(0,0,0,.2);
      --glass: rgba(255, 255, 255, 0.85);
      --glass-border: rgba(255, 255, 255, 0.3);
    }

    /* Base - FIX HORIZONTAL SCROLL */
    *{box-sizing:border-box}
    html,body{
      height:100%;
      margin:0;
      padding:0;
      background: linear-gradient(135deg, var(--bg-gradient-start) 0%, var(--bg-gradient-end) 100%);
      color: var(--text);
      font-family: 'Inter', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji", sans-serif;
      line-height:1.6;
      -webkit-font-smoothing:antialiased;
      text-rendering:optimizeLegibility;
      overflow-x: hidden; /* Prevent horizontal scroll */
      width: 100%; /* Ensure full width */
      max-width: 100vw; /* Prevent overflow */
    }
    
    /* Import premium fonts */
    @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=Inter:wght@300;400;500;600;700&display=swap');
    
    h1,h2,h3{
      font-family: 'Playfair Display', Georgia, "Times New Roman", serif;
      line-height:1.25;
      margin:0 0 .75rem;
      color: var(--text);
    }
    p{margin:.25rem 0 0}
    a{color:inherit}

    /* Animated Background - Responsive */
    .animated-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -1;
      overflow: hidden;
    }

    .gradient-orb {
      position: absolute;
      border-radius: 50%;
      filter: blur(60px);
      opacity: 0.3;
      animation: float-orb 20s ease-in-out infinite;
    }

    .orb-1 {
      width: min(300px, 40vw);
      height: min(300px, 40vw);
      background: radial-gradient(circle, var(--accent) 0%, transparent 70%);
      top: -10%;
      right: -10%;
      animation-delay: 0s;
    }

    .orb-2 {
      width: min(250px, 35vw);
      height: min(250px, 35vw);
      background: radial-gradient(circle, var(--primary) 0%, transparent 70%);
      bottom: -10%;
      left: -10%;
      animation-delay: 5s;
    }

    .orb-3 {
      width: min(200px, 30vw);
      height: min(200px, 30vw);
      background: radial-gradient(circle, var(--accent-light) 0%, transparent 70%);
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      animation-delay: 10s;
    }

    @keyframes float-orb {
      0%, 100% { transform: translate(0, 0) scale(1); }
      33% { transform: translate(5vw, -5vw) scale(1.1); }
      66% { transform: translate(-3vw, 3vw) scale(0.9); }
    }

    /* Enhanced Header - Fully Responsive */
    .header{
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1000;
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding: clamp(12px, 3vw, 16px) clamp(16px, 4vw, 20px);
      background: var(--glass);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--glass-border);
      transition: all 0.3s ease;
      width: 100%;
      max-width: 100vw;
    }
    
    .header.scrolled {
      padding: clamp(10px, 2vw, 12px) clamp(16px, 4vw, 20px);
      background: rgba(255, 255, 255, 0.95);
      box-shadow: var(--shadow);
    }
    
    .header__inner {
      max-width: 1200px;
      margin: 0 auto;
      width: 100%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0;
    }
    
    .brand{
      font-family: 'Playfair Display', serif;
      font-weight:700;
      font-size: clamp(1rem, 4vw, 1.5rem);
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      letter-spacing:-0.01em;
      white-space: nowrap;
    }
    
    .tag{
      display:inline-flex;
      align-items:center;
      gap:clamp(4px, 1vw, 8px);
      background: linear-gradient(135deg, var(--accent) 0%, var(--accent-light) 100%);
      color: white;
      padding:clamp(6px, 1.5vw, 12px) clamp(12px, 3vw, 20px);
      border-radius:999px;
      font-size: clamp(0.75rem, 2.5vw, 0.9rem);
      font-weight:600;
      box-shadow: var(--shadow);
      transition: all 0.3s ease;
      white-space: nowrap;
    }
    
    .tag:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
    }

    /* Page frame */
    .site{
      min-height:100svh;
      display:flex;
      flex-direction:column;
      width: 100%;
      max-width: 100vw;
      overflow-x: hidden;
    }

    /* Hero layout - Mobile First */
    .hero{
      position:relative;
      isolation:isolate;
      display:flex;
      flex:1 0 auto;
      align-items:center;
      padding: clamp(80px, 20vw, 100px) clamp(16px, 4vw, 20px) clamp(40px, 10vw, 60px);
      margin-top: clamp(50px, 12vw, 60px);
      width: 100%;
      max-width: 100vw;
      overflow-x: hidden;
    }
    .hero__inner{
      display:flex;
      flex-direction:column;
      gap:clamp(30px, 8vw, 60px);
      width:100%;
      max-width:1200px;
      margin:0 auto;
      text-align: center;
      padding: 0;
    }
    
    @media (min-width: 768px) {
      .hero__inner {
        text-align: left;
      }
    }
    
    @media (min-width: 900px){
      .hero__inner{
        flex-direction:row;
        align-items:center;
        gap:clamp(40px, 5vw, 60px);
      }
    }

    /* Decorative subtle confetti background */
    .confetti{
      pointer-events:none;
      position:absolute;
      inset:0;
      overflow:hidden;
      z-index:-1;
    }
    .confetti span{
      position:absolute;
      width:6px;height:6px;border-radius:50%;
      opacity:.28;
      background: var(--primary);
      box-shadow:
        14vw 8vh 0 0 var(--accent),
        28vw 36vh 0 0 var(--primary),
        72vw 22vh 0 0 color-mix(in srgb, var(--primary) 55%, white),
        86vw 68vh 0 0 var(--accent),
        8vw 74vh 0 0 color-mix(in srgb, var(--muted) 60%, white),
        44vw 12vh 0 0 var(--primary),
        58vw 80vh 0 0 color-mix(in srgb, var(--accent) 55%, white),
        12vw 48vh 0 0 var(--muted);
      animation: float 18s linear infinite;
    }
    .confetti span:nth-child(2){ animation-duration:22s; opacity:.24; transform:translateY(-2%); }
    .confetti span:nth-child(3){ animation-duration:26s; opacity:.22; transform:translateY(-4%); }
    @keyframes float{
      0%{ transform: translateY(0) }
      50%{ transform: translateY(-1.2%) }
      100%{ transform: translateY(0) }
    }

    /* Text column - Responsive */
    .copy{
      flex:1;
      max-width: 600px;
      margin: 0 auto;
      width: 100%;
    }
    
    @media (min-width: 900px) {
      .copy {
        margin: 0;
      }
    }
    
    .kicker{
      display:inline-flex;
      align-items:center;
      gap:clamp(8px, 2vw, 12px);
      font-weight:600;
      color: var(--muted);
      letter-spacing:.08em;
      text-transform:uppercase;
      font-size: clamp(0.75rem, 2.5vw, 0.9rem);
      margin-bottom: clamp(12px, 3vw, 16px);
    }
    .kicker::before{
      content:"";
      width:clamp(20px, 5vw, 30px);
      height:2px;
      border-radius:1px;
      background: linear-gradient(90deg, var(--accent) 0%, transparent 100%);
      display:inline-block;
    }
    .title{
      font-size: clamp(1.8rem, 6vw, 3.5rem);
      font-weight:900;
      letter-spacing:-0.02em;
      margin:clamp(12px, 3vw, 20px) 0;
      position:relative;
      line-height: 1.1;
      word-wrap: break-word;
      overflow-wrap: break-word;
    }
    .title .underline{
      position:relative;
      display:inline-block;
    }
    .title .underline::after{
      content:"";
      position:absolute;
      left:0;right:0;bottom:-6px;
      height:clamp(4px, 1vw, 6px);
      border-radius:6px;
      background: linear-gradient(90deg, var(--accent) 0%, var(--primary) 100%);
      filter: drop-shadow(0 2px 4px rgba(0,0,0,.1));
      transform-origin:left;
      transform:scaleX(0);
      animation: reveal 900ms 200ms ease forwards, shimmer 5s 1.4s linear infinite;
    }
    @keyframes reveal{ to{ transform:scaleX(1)}}
    @keyframes shimmer{
      0%{ opacity:.9 }
      50%{ opacity:1 }
      100%{ opacity:.9 }
    }
    .sub{
      font-size: clamp(1rem, 3vw, 1.25rem);
      color: var(--text);
      opacity:.92;
      max-width: 100%;
      line-height: 1.7;
      word-wrap: break-word;
      overflow-wrap: break-word;
    }
    
    @media (min-width: 768px) {
      .sub {
        max-width: 54ch;
      }
    }

    /* Photo column - Responsive */
    .photo{
      flex:0 1 auto;
      display:grid;
      place-items:center;
      max-width: 400px;
      margin: 0 auto;
      width: 100%;
    }
    
    @media (min-width: 900px) {
      .photo {
        max-width: 520px;
      }
    }
    
    .frame{
      position:relative;
      width: min(85vw, 400px);
      aspect-ratio: 9 / 16;
      border-radius: var(--radius);
      box-shadow: var(--shadow-xl);
      border: clamp(2px, 0.5vw, 3px) solid var(--accent);
      overflow:hidden;
      background:#00000010;
      transform: perspective(1000px) rotateY(-5deg);
      transition: transform 0.5s ease;
    }
    
    @media (min-width: 768px) {
      .frame {
        width: min(70vw, 520px);
      }
    }
    
    .frame:hover {
      transform: perspective(1000px) rotateY(0deg) scale(1.02);
    }
    
    .frame img{
      width:100%;height:100%;
      object-fit:cover;
      object-position:50% 45%;
      display:block;
      transform: scale(1.02);
      animation: kenburns 12s ease-in-out both;
    }
    .vignette::after{
      content:"";
      position:absolute;inset:0;
      background: radial-gradient(120% 120% at 50% 50%, transparent 55%, rgba(0,0,0,.18) 100%);
      pointer-events:none;
    }
    @keyframes kenburns{
      0%{ transform: scale(1.02) translateY(0) }
      100%{ transform: scale(1.05) translateY(-1%) }
    }

    .ribbon{
      position:absolute;
      right:clamp(12px, 3vw, 20px); 
      top:clamp(12px, 3vw, 20px);
      background: linear-gradient(135deg, var(--accent) 0%, var(--accent-light) 100%);
      color: white;
      font-weight:700;
      font-size: clamp(0.7rem, 2vw, 0.9rem);
      padding:clamp(6px, 1.5vw, 12px) clamp(10px, 2.5vw, 16px);
      border-radius:clamp(8px, 2vw, 12px);
      letter-spacing:.02em;
      box-shadow: var(--shadow-lg);
      animation: float 3s ease-in-out infinite;
    }

    .caption{
      position:absolute;
      left:clamp(12px, 3vw, 20px); 
      bottom:clamp(12px, 3vw, 20px);
      background: var(--glass);
      backdrop-filter: blur(10px);
      color: var(--text);
      font-weight:600;
      font-size: clamp(0.8rem, 2vw, 1rem);
      padding:clamp(6px, 1.5vw, 12px) clamp(12px, 3vw, 20px);
      border-radius:999px;
      border:1px solid var(--glass-border);
      box-shadow: var(--shadow);
    }

    /* Entrance animation on copy */
    .copy [data-anim]{
      opacity:0; transform: translateY(10px);
      animation: fadeUp .9s ease forwards;
    }
    .copy [data-anim="1"]{ animation-delay:.15s }
    .copy [data-anim="2"]{ animation-delay:.35s }
    .copy [data-anim="3"]{ animation-delay:.55s }
    @keyframes fadeUp{
      to{ opacity:1; transform:none }
    }

    /* Memories Section - Fully Responsive */
    .memories{
      position:relative;
      isolation:isolate;
      padding: clamp(60px, 15vw, 80px) clamp(16px, 4vw, 20px);
      width: 100%;
      max-width: 100vw;
      overflow-x: hidden;
    }
    .memories__inner{
      max-width:1200px;
      margin:0 auto;
      text-align:center;
      width: 100%;
      padding: 0;
    }
    .memories h2{
      font-size: clamp(1.5rem, 5vw, 3rem);
      margin-bottom: clamp(8px, 2vw, 16px);
      background: linear-gradient(135deg, var(--text) 0%, var(--primary) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      word-wrap: break-word;
      overflow-wrap: break-word;
    }
    .memories .subtle{
      color: var(--muted);
      font-size: clamp(0.9rem, 3vw, 1.1rem);
      margin-bottom: clamp(30px, 8vw, 40px);
    }
    
    .memories .confetti{ 
      inset:auto; 
      top:0; 
      left:0; 
      right:0; 
      height:100%; 
      opacity:.6 
    }

    .controls{
      display:flex; 
      justify-content:center; 
      gap:clamp(12px, 3vw, 20px); 
      margin-top:clamp(20px, 5vw, 30px);
      flex-wrap: wrap;
    }
    .btn{
      border:clamp(1px, 0.3vw, 2px) solid var(--accent);
      background: linear-gradient(135deg, var(--accent) 0%, var(--accent-light) 100%);
      color: white; 
      font-weight:700; 
      font-size: clamp(0.85rem, 2.5vw, 1rem);
      padding:clamp(8px, 2vw, 12px) clamp(16px, 4vw, 24px); 
      border-radius:999px; 
      cursor:pointer;
      box-shadow: var(--shadow);
      transition: all 0.3s ease;
      min-width: clamp(80px, 20vw, 120px);
      white-space: nowrap;
    }
    
    .btn:hover {
      transform: translateY(-3px);
      box-shadow: var(--shadow-lg);
    }
    
    .btn:focus-visible{ 
      outline:3px solid color-mix(in srgb, var(--primary) 70%, white); 
      outline-offset:2px 
    }

    /* Enhanced Lightbox with Touch Support */
    .lightbox{
      position: fixed;
      inset: 0;
      display: none;
      place-items: center;
      background: rgba(0,0,0,0.9);
      backdrop-filter: blur(5px);
      padding: 0;
      z-index: 9999;
      touch-action: pan-y pinch-zoom;
      width: 100vw;
      max-width: 100vw;
    }
    .lightbox[aria-hidden="false"]{ display: grid; animation: lbFade .25s ease both }
    @keyframes lbFade{ from{ opacity:0 } to{ opacity:1 } }

    .lb-dialog{
      position: relative;
      width: 100%;
      height: 100%;
      max-width: 100vw;
      max-height: 100vh;
      background: #000;
      overflow: hidden;
      outline: none;
      display: flex;
      flex-direction: column;
    }

    .lb-stage{
      width: 100%;
      height: 100%;
      background:#000;
      overflow: hidden;
      display: grid;
      place-items: center;
      background-size: contain;
      background-position: center;
      background-repeat: no-repeat;
      touch-action: pan-y pinch-zoom;
      cursor: grab;
      transition: transform 0.3s ease;
    }

    .lb-stage.dragging {
      cursor: grabbing;
      transition: none;
    }

    .lb-stage.zoomed{
      background-size: 120%;
      cursor: zoom-out;
      touch-action: pinch-zoom;
    }

    .lb-img{
      display:none;
      width: 100%;
      height: 100%;
      object-fit: contain;
      object-position: center;
    }

    /* Enhanced Lightbox Controls */
    .lb-controls {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
      padding: clamp(20px, 5vw, 40px) clamp(16px, 4vw, 20px);
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 10;
    }

    .lb-nav {
      display: flex;
      gap: clamp(12px, 3vw, 20px);
    }

    .lb-btn {
      width: clamp(44px, 10vw, 56px);
      height: clamp(44px, 10vw, 56px);
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.3);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: clamp(18px, 4vw, 24px);
      touch-action: manipulation;
    }

    .lb-btn:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: scale(1.1);
    }

    .lb-btn:active {
      transform: scale(0.95);
    }

    .lb-close {
      background: rgba(231, 111, 81, 0.8);
    }

    .lb-close:hover {
      background: rgba(231, 111, 81, 1);
    }

    .lb-counter {
      color: white;
      font-size: clamp(14px, 3vw, 16px);
      font-weight: 500;
      text-shadow: 0 1px 2px rgba(0,0,0,0.5);
    }

    /* Swipe indicators */
    .swipe-hint {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      color: rgba(255, 255, 255, 0.6);
      font-size: clamp(24px, 6vw, 32px);
      animation: swipeHint 2s ease-in-out infinite;
      pointer-events: none;
      z-index: 5;
    }

    .swipe-hint.left {
      left: clamp(20px, 5vw, 40px);
    }

    .swipe-hint.right {
      right: clamp(20px, 5vw, 40px);
    }

    @keyframes swipeHint {
      0%, 100% { opacity: 0.3; transform: translateY(-50%) translateX(0); }
      50% { opacity: 0.8; transform: translateY(-50%) translateX(-10px); }
    }

    .swipe-hint.right {
      animation-name: swipeHintRight;
    }

    @keyframes swipeHintRight {
      0%, 100% { opacity: 0.3; transform: translateY(-50%) translateX(0); }
      50% { opacity: 0.8; transform: translateY(-50%) translateX(10px); }
    }

    /* Fan Gallery - Fully Responsive and Centered */
    .fan-container {
      position: relative;
      width: 100%;
      height: clamp(300px, 50vw, 500px);
      margin: clamp(30px, 8vw, 40px) 0;
      display: flex;
      justify-content: center;
      align-items: center;
      perspective: 1500px;
      max-width: 100vw;
      overflow: hidden;
    }
    
    .fan{
      position: relative;
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    .card{
      position: absolute;
      width: clamp(120px, 25vw, 280px);
      height: clamp(160px, 35vw, 380px);
      border-radius: clamp(12px, 3vw, 16px);
      background: #fff;
      border: clamp(2px, 0.5vw, 3px) solid var(--accent);
      box-shadow: var(--shadow-lg);
      overflow: hidden;
      transform-origin: center bottom;
      transition: all 0.6s cubic-bezier(.22,1,.36,1);
      cursor: pointer;
    }
    
    .card img{
      width:100%; 
      height: calc(100% - clamp(40px, 10vw, 60px));
      object-fit: cover;
      display:block;
      transition: transform 0.6s ease;
    }
    
    .card:hover{ 
      box-shadow: var(--shadow-xl);
      z-index: 10;
      transform: translateY(-10px) scale(1.02);
    }
    
    .card:hover img {
      transform: scale(1.05);
    }
    
    .card:focus-within{ 
      outline: 3px solid color-mix(in srgb, var(--primary) 70%, white); 
      outline-offset: 2px 
    }

    /* FIXED: Default spread positions - these will be the initial state */
    .card:nth-child(1){ 
      --rot: -25deg; 
      --shift: -50px; 
      --y: -20px; 
      z-index:1; 
      transform: rotate(var(--rot)) translateX(var(--shift)) translateY(var(--y)); 
    }
    .card:nth-child(2){ 
      --rot: -8deg; 
      --shift: -20px; 
      --y: -10px; 
      z-index:2; 
      transform: rotate(var(--rot)) translateX(var(--shift)) translateY(var(--y)); 
    }
    .card:nth-child(3){ 
      --rot: 8deg; 
      --shift: 20px; 
      --y: -10px; 
      z-index:3; 
      transform: rotate(var(--rot)) translateX(var(--shift)) translateY(var(--y)); 
    }
    .card:nth-child(4){ 
      --rot: 25deg; 
      --shift: 50px; 
      --y: -20px; 
      z-index:4; 
      transform: rotate(var(--rot)) translateX(var(--shift)) translateY(var(--y)); 
    }

    /* Enhanced Fan Positions - More Centered and Better Looking */
    
    /* Extra Small Screens (320px and below) */
    @media (max-width: 320px) {
      .fan.spread .card:nth-child(1){ 
        transform: rotate(-25deg) translateX(-50px) translateY(-20px); 
        z-index:1; 
      }
      .fan.spread .card:nth-child(2){ 
        transform: rotate(-8deg) translateX(-20px) translateY(-10px); 
        z-index:2; 
      }
      .fan.spread .card:nth-child(3){ 
        transform: rotate(8deg) translateX(20px) translateY(-10px); 
        z-index:3; 
      }
      .fan.spread .card:nth-child(4){ 
        transform: rotate(25deg) translateX(50px) translateY(-20px); 
        z-index:4; 
      }
      
      .fan.gather .card:nth-child(1){ 
        transform: rotate(-5deg) translateX(-15px) translateY(-5px); 
        z-index:1 
      }
      .fan.gather .card:nth-child(2){ 
        transform: rotate(-2deg) translateX(-5px) translateY(-2px); 
        z-index:2 
      }
      .fan.gather .card:nth-child(3){ 
        transform: rotate(2deg) translateX(5px) translateY(-2px); 
        z-index:3 
      }
      .fan.gather .card:nth-child(4){ 
        transform: rotate(5deg) translateX(15px) translateY(-5px); 
        z-index:4 
      }
    }
    
    /* Small Screens (321px - 480px) */
    @media (min-width: 321px) and (max-width: 480px) {
      .card:nth-child(1){ 
        --rot: -30deg; 
        --shift: -70px; 
        --y: -30px; 
        transform: rotate(var(--rot)) translateX(var(--shift)) translateY(var(--y)); 
      }
      .card:nth-child(2){ 
        --rot: -10deg; 
        --shift: -30px; 
        --y: -15px; 
        transform: rotate(var(--rot)) translateX(var(--shift)) translateY(var(--y)); 
      }
      .card:nth-child(3){ 
        --rot: 10deg; 
        --shift: 30px; 
        --y: -15px; 
        transform: rotate(var(--rot)) translateX(var(--shift)) translateY(var(--y)); 
      }
      .card:nth-child(4){ 
        --rot: 30deg; 
        --shift: 70px; 
        --y: -30px; 
        transform: rotate(var(--rot)) translateX(var(--shift)) translateY(var(--y)); 
      }
      
      .fan.spread .card:nth-child(1){ 
        transform: rotate(-30deg) translateX(-70px) translateY(-30px); 
        z-index:1; 
      }
      .fan.spread .card:nth-child(2){ 
        transform: rotate(-10deg) translateX(-30px) translateY(-15px); 
        z-index:2; 
      }
      .fan.spread .card:nth-child(3){ 
        transform: rotate(10deg) translateX(30px) translateY(-15px); 
        z-index:3; 
      }
      .fan.spread .card:nth-child(4){ 
        transform: rotate(30deg) translateX(70px) translateY(-30px); 
        z-index:4; 
      }
      
      .fan.gather .card:nth-child(1){ 
        transform: rotate(-6deg) translateX(-20px) translateY(-8px); 
        z-index:1 
      }
      .fan.gather .card:nth-child(2){ 
        transform: rotate(-2deg) translateX(-7px) translateY(-3px); 
        z-index:2 
      }
      .fan.gather .card:nth-child(3){ 
        transform: rotate(2deg) translateX(7px) translateY(-3px); 
        z-index:3 
      }
      .fan.gather .card:nth-child(4){ 
        transform: rotate(6deg) translateX(20px) translateY(-8px); 
        z-index:4 
      }
    }
    
    /* Medium Screens (481px - 768px) */
    @media (min-width: 481px) and (max-width: 768px) {
      .card:nth-child(1){ 
        --rot: -35deg; 
        --shift: -100px; 
        --y: -40px; 
        transform: rotate(var(--rot)) translateX(var(--shift)) translateY(var(--y)); 
      }
      .card:nth-child(2){ 
        --rot: -12deg; 
        --shift: -40px; 
        --y: -20px; 
        transform: rotate(var(--rot)) translateX(var(--shift)) translateY(var(--y)); 
      }
      .card:nth-child(3){ 
        --rot: 12deg; 
        --shift: 40px; 
        --y: -20px; 
        transform: rotate(var(--rot)) translateX(var(--shift)) translateY(var(--y)); 
      }
      .card:nth-child(4){ 
        --rot: 35deg; 
        --shift: 100px; 
        --y: -40px; 
        transform: rotate(var(--rot)) translateX(var(--shift)) translateY(var(--y)); 
      }
      
      .fan.spread .card:nth-child(1){ 
        transform: rotate(-35deg) translateX(-100px) translateY(-40px); 
        z-index:1; 
      }
      .fan.spread .card:nth-child(2){ 
        transform: rotate(-12deg) translateX(-40px) translateY(-20px); 
        z-index:2; 
      }
      .fan.spread .card:nth-child(3){ 
        transform: rotate(12deg) translateX(40px) translateY(-20px); 
        z-index:3; 
      }
      .fan.spread .card:nth-child(4){ 
        transform: rotate(35deg) translateX(100px) translateY(-40px); 
        z-index:4; 
      }
      
      .fan.gather .card:nth-child(1){ 
        transform: rotate(-8deg) translateX(-30px) translateY(-10px); 
        z-index:1 
      }
      .fan.gather .card:nth-child(2){ 
        transform: rotate(-3deg) translateX(-10px) translateY(-5px); 
        z-index:2 
      }
      .fan.gather .card:nth-child(3){ 
        transform: rotate(3deg) translateX(10px) translateY(-5px); 
        z-index:3 
      }
      .fan.gather .card:nth-child(4){ 
        transform: rotate(8deg) translateX(30px) translateY(-10px); 
        z-index:4 
      }
    }
    
    /* Large Screens (769px and above) */
    @media (min-width: 769px) {
      .card:nth-child(1){ 
        --rot: -40deg; 
        --shift: -180px; 
        --y: -60px; 
        transform: rotate(var(--rot)) translateX(var(--shift)) translateY(var(--y)); 
      }
      .card:nth-child(2){ 
        --rot: -15deg; 
        --shift: -70px; 
        --y: -30px; 
        transform: rotate(var(--rot)) translateX(var(--shift)) translateY(var(--y)); 
      }
      .card:nth-child(3){ 
        --rot: 15deg; 
        --shift: 70px; 
        --y: -30px; 
        transform: rotate(var(--rot)) translateX(var(--shift)) translateY(var(--y)); 
      }
      .card:nth-child(4){ 
        --rot: 40deg; 
        --shift: 180px; 
        --y: -60px; 
        transform: rotate(var(--rot)) translateX(var(--shift)) translateY(var(--y)); 
      }
      
      .fan.spread .card:nth-child(1){ 
        transform: rotate(-40deg) translateX(-180px) translateY(-60px); 
        z-index:1; 
      }
      .fan.spread .card:nth-child(2){ 
        transform: rotate(-15deg) translateX(-70px) translateY(-30px); 
        z-index:2; 
      }
      .fan.spread .card:nth-child(3){ 
        transform: rotate(15deg) translateX(70px) translateY(-30px); 
        z-index:3; 
      }
      .fan.spread .card:nth-child(4){ 
        transform: rotate(40deg) translateX(180px) translateY(-60px); 
        z-index:4; 
      }
      
      .fan.gather .card:nth-child(1){ 
        transform: rotate(-10deg) translateX(-40px) translateY(-15px); 
        z-index:1 
      }
      .fan.gather .card:nth-child(2){ 
        transform: rotate(-4deg) translateX(-15px) translateY(-7px); 
        z-index:2 
      }
      .fan.gather .card:nth-child(3){ 
        transform: rotate(4deg) translateX(15px) translateY(-7px); 
        z-index:3 
      }
      .fan.gather .card:nth-child(4){ 
        transform: rotate(10deg) translateX(40px) translateY(-15px); 
        z-index:4 
      }
    }

    /* Gentle float animation - only for spread state */
    .fan.spread .card{ 
      animation: floatY 12s ease-in-out infinite 
    }
    .fan.spread .card:nth-child(1){ animation-delay: .0s }
    .fan.spread .card:nth-child(2){ animation-delay: .3s }
    .fan.spread .card:nth-child(3){ animation-delay: .6s }
    .fan.spread .card:nth-child(4){ animation-delay: .9s }
    @keyframes floatY{
      0%,100%{ 
        transform: rotate(var(--rot)) translateX(var(--shift)) translateY(var(--y)); 
      }
      50%{ 
        transform: rotate(var(--rot)) translateX(var(--shift)) translateY(calc(var(--y) - 10px)); 
      }
    }

    .polacap{
      position:absolute;
      left: clamp(8px, 2vw, 15px); 
      right: clamp(8px, 2vw, 15px); 
      bottom: clamp(8px, 2vw, 15px);
      padding: clamp(4px, 1vw, 8px) clamp(8px, 2vw, 12px);
      background: linear-gradient(135deg, var(--bg) 0%, var(--bg-gradient-end) 100%);
      border:1px solid var(--accent);
      border-radius: clamp(8px, 2vw, 12px);
      font-size: clamp(0.7rem, 2vw, 0.9rem);
      font-weight: 700;
      color: var(--text);
      text-align:center;
      box-shadow: var(--shadow);
      font-family: 'Playfair Display', serif;
    }

    /* Respect reduced motion */
    @media (prefers-reduced-motion: reduce){
      .fan.spread .card{ animation: none }
    }

    /* ENHANCED: Group Caption with Clean Heart - NO SQUARE BOX */
    .group-caption {
      position: relative;
      display: inline-block;
      margin-top: clamp(2rem, 5vw, 3rem);
      padding: clamp(1rem, 3vw, 1.5rem) clamp(1.5rem, 4vw, 3rem);
      font-family: 'Playfair Display', serif;
      font-size: clamp(1.5rem, 5vw, 3rem);
      font-weight: 900;
      text-align: center;
      width: 100%;
      max-width: 100%;
      overflow: hidden;
    }

    .group-caption .text-gradient {
      background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 50%, var(--primary) 100%);
      background-size: 200% 200%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: gradient-shift 4s ease-in-out infinite;
    }

    /* FIXED: Clean Heart without Square Box */
    .group-caption .heart {
      display: inline-block;
      position: relative;
      margin: 0 0.1em;
      animation: heartbeat 1.5s ease-in-out infinite;
      /* Clean heart styling - NO BACKGROUND OR BORDER */
      color: var(--primary) !important;
      -webkit-text-fill-color: var(--primary) !important;
      text-fill-color: var(--primary) !important;
      /* Remove any background or border */
      background: none !important;
      border: none !important;
      outline: none !important;
      box-shadow: none !important;
      /* Subtle text shadow for visibility */
      text-shadow: 0 0 8px rgba(231, 111, 81, 0.6);
      /* Font family for emoji */
      font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Noto Color Emoji', sans-serif;
      font-size: 1em;
      line-height: 1;
      vertical-align: baseline;
      /* Ensure no extra spacing */
      padding: 0;
      margin: 0 0.1em;
      /* Remove any transform that might cause issues */
      transform: none;
      /* Ensure it's inline */
      display: inline-block;
    }

    /* SVG Heart Fallback for problematic browsers */
    .group-caption .heart-svg {
      display: none;
      width: 1.1em;
      height: 1.1em;
      vertical-align: middle;
      margin: 0 0.1em;
      animation: heartbeat 1.5s ease-in-out infinite;
    }

    /* Show SVG heart if emoji fails */
    @supports not (-webkit-text-fill-color: transparent) {
      .group-caption .heart {
        display: none;
      }
      .group-caption .heart-svg {
        display: inline-block;
      }
    }

    @keyframes gradient-shift {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    @keyframes heartbeat {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.2); }
    }

    /* Decorative elements around the caption */
    .group-caption::before, .group-caption::after {
      content: "✿";
      position: absolute;
      color: var(--accent);
      font-size: clamp(1rem, 3vw, 1.5rem);
      opacity: 0.7;
    }

    .group-caption::before {
      top: clamp(-15px, -4vw, -20px);
      left: clamp(20px, 5vw, 30px);
      transform: rotate(-15deg);
    }

    .group-caption::after {
      top: clamp(-15px, -4vw, -20px);
      right: clamp(20px, 5vw, 30px);
      transform: rotate(15deg);
    }

    /* Footer - Responsive */
    .footer{
      margin:clamp(40px, 10vw, 60px) 0 clamp(20px, 5vw, 40px); 
      text-align:center; 
      color:var(--muted);
      border-top:1px dashed var(--accent);
      padding-top:clamp(20px, 5vw, 30px);
      background: var(--glass);
      backdrop-filter: blur(10px);
      width: 100%;
      max-width: 100vw;
      overflow: hidden;
    }
    
    .footer-text {
      font-size: clamp(0.9rem, 3vw, 1.1rem);
      margin-bottom: clamp(8px, 2vw, 10px);
    }
    
    .footer-heart {
      color: var(--primary);
      animation: heartbeat 1.5s ease-in-out infinite;
      /* Clean footer heart */
      font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Noto Color Emoji', sans-serif;
      text-shadow: 0 0 8px rgba(231, 111, 81, 0.5);
      display: inline-block;
    }
    
    /* Respect reduced motion */
    @media (prefers-reduced-motion: reduce){
      .title .underline::after,
      .confetti span,
      .copy [data-anim],
      .frame img{ animation:none }
    }

    /* Mobile-specific heart fixes */
    @media (max-width: 768px) {
      .group-caption .heart {
        /* Mobile emphasis without box */
        font-size: 1.1em;
        text-shadow: 0 0 12px rgba(231, 111, 81, 0.8);
        /* Ensure no box */
        background: none !important;
        border: none !important;
        outline: none !important;
        box-shadow: none !important;
      }
    }

    /* iOS Safari specific fix */
    @supports (-webkit-touch-callout: none) {
      .group-caption .heart {
        /* iOS Safari emoji fix */
        font-family: 'Apple Color Emoji', sans-serif;
        -webkit-font-smoothing: antialiased;
        /* Remove any iOS-specific box */
        -webkit-appearance: none;
        appearance: none;
      }
    }

    /* Android Chrome specific fix */
    @media screen and (-webkit-min-device-pixel-ratio: 0) {
      .group-caption .heart {
        /* Android emoji fix */
        transform: translateZ(0);
        will-change: transform;
        /* Remove any Android-specific box */
        -webkit-tap-highlight-color: transparent;
      }
    }
  </style>
</head>
<body>
  <!-- Animated Background -->
  <div class="animated-bg">
    <div class="gradient-orb orb-1"></div>
    <div class="gradient-orb orb-2"></div>
    <div class="gradient-orb orb-3"></div>
  </div>

  <div class="site">
    <header class="header" aria-label="Page header">
      <div class="header__inner">
        <div class="brand" aria-label="Tribute title">Athamma's Birthday</div>
        <div class="tag" aria-label="Birthday tag">🎂 Oct 5</div>
      </div>
    </header>

    <main class="hero" id="hero">
      <!-- Subtle festive confetti (decorative only) -->
      <div class="confetti" aria-hidden="true"><span></span><span></span><span></span></div>

      <section class="hero__inner" aria-labelledby="hero-title">
        <div class="copy">
          <div class="kicker" data-anim="1">With gratitude and love</div>

          <h1 id="hero-title" class="title" data-anim="2">
            Happy Birthday, <span class="underline">Athamma</span> — the woman who's like a mother to me
          </h1>

          <p class="sub" data-anim="3">
            Your kindness, strength, and gentle care have shaped my life in countless ways. I promise to always make you proud, Athamma.
          </p>
        </div>

        <figure class="photo" aria-label="Together photo">
          <div class="frame vignette" role="img" aria-label="A warm selfie of me with my aunt, Athamma, in a glowing tunnel — smiling together.">
            <!-- Switch hero image to provided Source URL -->
            <img
              src="https://hebbkx1anhila5yf.public.blob.vercel-storage.com/WhatsApp%20Image%202025-10-04%20at%2010.29.42%20PM-M2wwj33gFrwCi24KtcyLV0eXGHKiWU.jpeg"
              alt="Me with Athamma in a glowing tunnel, smiling together."
              width="738" height="1600"
              loading="eager"
              decoding="async"
            />
            <div class="ribbon" aria-hidden="true">🎉 Oct 5</div>
            <figcaption class="caption">With love, always.</figcaption>
          </div>
        </figure>
      </section>
    </main>

    <!-- Enhanced Polaroid Fan Stack "Memory stack" section with subtle confetti -->
    <section id="memories" class="memories" aria-labelledby="memories-title">
      <div class="confetti" aria-hidden="true"><span></span><span></span><span></span></div>

      <div class="memories__inner">
        <h2 id="memories-title">Cherished Memories</h2>
        <p class="subtle">A beautiful fan of precious moments with Athamma</p>

        <div class="controls" aria-label="Fan controls">
          <button id="toggleFan" class="btn" aria-pressed="true">Spread</button>
          <button id="gatherFan" class="btn" aria-pressed="false">Gather</button>
        </div>

        <!-- Enhanced Fan Container for Better Centering -->
        <div class="fan-container">
          <div class="fan spread" id="fan" aria-label="Polaroid fan of photos">
            <!-- Garden bench 1 -->
            <figure class="card">
              <img src="https://hebbkx1anhila5yf.public.blob.vercel-storage.com/WhatsApp%20Image%202025-10-04%20at%2010.23.47%20PM-kEkJlZquJus0Lj8gqiU0yw0aSH0Ih0.jpeg" alt="Athamma sitting on a white garden bench by lush greenery, smiling." loading="lazy" width="738" height="1600"/>
              <figcaption class="polacap">Garden Serenity</figcaption>
            </figure>

            <!-- Taj Mahal -->
            <figure class="card">
              <img src="https://hebbkx1anhila5yf.public.blob.vercel-storage.com/WhatsApp%20Image%202025-10-04%20at%2010.23.46%20PM-ptddqCyuMHj4DZHzbJAb0ilrpJXMUs.jpeg" alt="Athamma at the Taj Mahal, smiling toward the camera." loading="lazy" width="738" height="1600"/>
              <figcaption class="polacap">Taj Mahal</figcaption>
            </figure>

            <!-- Blue sari indoors -->
            <figure class="card">
              <img src="https://hebbkx1anhila5yf.public.blob.vercel-storage.com/WhatsApp%20Image%202025-10-04%20at%2010.23.45%20PM-F3RbgG4lcUWqvA79IdhjswbeJt5JZw.jpeg" alt="Athamma indoors in a blue sari, a quiet thoughtful moment." loading="lazy" width="738" height="1600"/>
              <figcaption class="polacap">Timeless Elegance</figcaption>
            </figure>

            <!-- Festive pink/purple -->
            <figure class="card">
              <img src="https://hebbkx1anhila5yf.public.blob.vercel-storage.com/WhatsApp%20Image%202025-10-04%20at%2010.23.45%20PM%20%281%29-s75YPl6wNr6rsh3uB4xIX78PpMUTm0.jpeg" alt="Athamma in a festive purple and pink sari, smiling by balloons." loading="lazy" width="738" height="1600"/>
              <figcaption class="polacap">Joyful Celebration</figcaption>
            </figure>
          </div>
        </div>

        <!-- FIXED: Clean Heart without Square Box -->
        <p class="group-caption">
          <span class="text-gradient">Happy Birthday</span> 
          <span class="heart">❤️</span>
          <!-- SVG Fallback -->
          <svg class="heart-svg" viewBox="0 0 24 24" fill="#E76F51" aria-hidden="true">
            <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
          </svg>
          <span class="text-gradient">Athamma</span>
        </p>
      </div>
    </section>

    <!-- Enhanced Footer note -->
    <footer class="footer" aria-label="Footer note">
      <p class="footer-text">Made with <span class="footer-heart">❤️</span> from the heart</p>
      <p class="footer-text">May your special day be filled with joy and love</p>
    </footer>
  </div>

  <!-- Enhanced Lightbox with Touch Support -->
  <div class="lightbox" id="lightbox" aria-hidden="true">
    <div class="lb-dialog">
      <div class="lb-stage" id="lb-stage">
        <img class="lb-img" id="lb-img" alt="" />
        <div class="swipe-hint left">‹</div>
        <div class="swipe-hint right">›</div>
      </div>
      <div class="lb-controls">
        <div class="lb-counter">
          <span id="current-index">1</span> / <span id="total-images">4</span>
        </div>
        <div class="lb-nav">
          <button class="lb-btn" id="lb-prev" aria-label="Previous">‹</button>
          <button class="lb-btn" id="lb-next" aria-label="Next">›</button>
          <button class="lb-btn lb-close" id="lb-close" aria-label="Close">✕</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Header scroll effect
    window.addEventListener('scroll', () => {
      const header = document.querySelector('.header');
      if (window.scrollY > 50) {
        header.classList.add('scrolled');
      } else {
        header.classList.remove('scrolled');
      }
    });

    // Fan functionality - ENSURE SPREAD BY DEFAULT
    (function(){
      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

      const fan = document.getElementById('fan');
      const btnSpread = document.getElementById('toggleFan');
      const btnGather = document.getElementById('gatherFan');
      
      // Set initial button states immediately
      if (btnSpread && btnGather) {
        btnSpread.setAttribute('aria-pressed', 'true');
        btnGather.setAttribute('aria-pressed', 'false');
      }
      
      if (btnSpread && btnGather && fan){
        const setSpread = ()=>{ 
          fan.classList.add('spread'); 
          fan.classList.remove('gather'); 
          btnSpread.setAttribute('aria-pressed','true'); 
          btnGather.setAttribute('aria-pressed','false'); 
        };
        const setGather = ()=>{ 
          fan.classList.add('gather'); 
          fan.classList.remove('spread'); 
          btnSpread.setAttribute('aria-pressed','false'); 
          btnGather.setAttribute('aria-pressed','true'); 
        };
        btnSpread.addEventListener('click', setSpread);
        btnGather.addEventListener('click', setGather);
        
        // Ensure spread is set initially - no delay needed since CSS handles it
        setSpread();
      }

      // Pointer tilt effect
      if (!prefersReduced && fan){
        const maxTilt = 6;
        fan.querySelectorAll('.card').forEach(card=>{
          let rafId=null;
          const onMove=(e)=>{
            const r=card.getBoundingClientRect();
            const x=(e.clientX-r.left)/r.width;
            const y=(e.clientY-r.top)/r.height;
            const tiltX=(0.5-y)*maxTilt*2;
            const tiltY=(x-0.5)*maxTilt*2;
            if (rafId) cancelAnimationFrame(rafId);
            rafId=requestAnimationFrame(()=>{
              card.style.setProperty('--tiltX', tiltX.toFixed(2)+'deg');
              card.style.setProperty('--tiltY', tiltY.toFixed(2)+'deg');
            });
          };
          const reset=()=>{
            if (rafId) cancelAnimationFrame(rafId);
            card.style.setProperty('--tiltX','0deg');
            card.style.setProperty('--tiltY','0deg');
          };
          card.addEventListener('pointermove', onMove);
          card.addEventListener('pointerleave', reset);
        });
      }

      // Enhanced Lightbox with Touch Support
      const imgs = Array.from(document.querySelectorAll('.fan .card img'));
      if (!imgs.length) return;

      const lightbox = document.getElementById('lightbox');
      const lbStage = document.getElementById('lb-stage');
      const lbImg = document.getElementById('lb-img');
      const btnPrev = document.getElementById('lb-prev');
      const btnNext = document.getElementById('lb-next');
      const btnClose = document.getElementById('lb-close');
      const currentIndexEl = document.getElementById('current-index');
      const totalImagesEl = document.getElementById('total-images');

      let idx = 0;
      let lastFocus = null;
      let touchStartX = 0;
      let touchEndX = 0;
      let isDragging = false;
      let startX = 0;
      let currentX = 0;

      // Set total images count
      totalImagesEl.textContent = imgs.length;

      function show(i){
        idx = (i + imgs.length) % imgs.length;
        const source = imgs[idx];
        const src = source.getAttribute('src');
        const alt = source.getAttribute('alt') || '';
        
        lbStage.style.backgroundImage = `url("${src}")`;
        lbStage.classList.remove('zoomed');
        lbImg.src = src;
        lbImg.alt = alt;
        currentIndexEl.textContent = idx + 1;
        
        // Hide swipe hints after first interaction
        const hints = document.querySelectorAll('.swipe-hint');
        hints.forEach(hint => {
          if (idx > 0) {
            hint.style.opacity = '0';
            setTimeout(() => hint.style.display = 'none', 300);
          }
        });
      }
      
      function open(i){
        lastFocus = document.activeElement;
        show(i);
        lightbox.setAttribute('aria-hidden','false');
        document.body.style.overflow = 'hidden';
        document.addEventListener('keydown', onKey);
        lightbox.addEventListener('click', onBackdrop);
        
        // Show swipe hints on mobile
        if (window.innerWidth <= 768) {
          const hints = document.querySelectorAll('.swipe-hint');
          hints.forEach(hint => {
            hint.style.display = 'block';
            hint.style.opacity = '0.6';
          });
        }
      }
      
      function close(){
        lightbox.setAttribute('aria-hidden','true');
        document.body.style.overflow = '';
        document.removeEventListener('keydown', onKey);
        lightbox.removeEventListener('click', onBackdrop);
        lbStage.classList.remove('zoomed');
        if (lastFocus && lastFocus.focus) lastFocus.focus;
        
        // Reset swipe hints
        const hints = document.querySelectorAll('.swipe-hint');
        hints.forEach(hint => {
          hint.style.display = 'none';
          hint.style.opacity = '0';
        });
      }
      
      function onKey(e){
        if (e.key === 'Escape') return close();
        if (e.key === 'ArrowRight') return show(idx+1);
        if (e.key === 'ArrowLeft') return show(idx-1);
        if (e.key === '+' || e.key === '='){ 
          lbStage.classList.add('zoomed'); 
        }
        if (e.key === '-' || e.key === '_'){ 
          lbStage.classList.remove('zoomed'); 
        }
      }
      
      function onBackdrop(e){ 
        if (e.target === lightbox) close(); 
      }

      // Touch/Swipe Support
      function handleTouchStart(e) {
        touchStartX = e.touches[0].clientX;
        startX = e.touches[0].clientX;
        isDragging = true;
        lbStage.classList.add('dragging');
      }

      function handleTouchMove(e) {
        if (!isDragging) return;
        currentX = e.touches[0].clientX;
        const diff = currentX - startX;
        
        // Add visual feedback during swipe
        if (Math.abs(diff) > 10) {
          lbStage.style.transform = `translateX(${diff * 0.3}px)`;
        }
      }

      function handleTouchEnd(e) {
        if (!isDragging) return;
        isDragging = false;
        lbStage.classList.remove('dragging');
        
        touchEndX = e.changedTouches[0].clientX;
        const diff = touchStartX - touchEndX;
        
        // Reset transform
        lbStage.style.transform = '';
        
        // Determine swipe direction
        if (Math.abs(diff) > 50) { // Minimum swipe distance
          if (diff > 0) {
            // Swiped left - show next image
            show(idx + 1);
          } else {
            // Swiped right - show previous image
            show(idx - 1);
          }
        }
      }

      // Mouse drag support for desktop
      function handleMouseDown(e) {
        startX = e.clientX;
        isDragging = true;
        lbStage.classList.add('dragging');
        e.preventDefault();
      }

      function handleMouseMove(e) {
        if (!isDragging) return;
        currentX = e.clientX;
        const diff = currentX - startX;
        
        if (Math.abs(diff) > 10) {
          lbStage.style.transform = `translateX(${diff * 0.3}px)`;
        }
      }

      function handleMouseUp(e) {
        if (!isDragging) return;
        isDragging = false;
        lbStage.classList.remove('dragging');
        
        const diff = startX - currentX;
        lbStage.style.transform = '';
        
        if (Math.abs(diff) > 50) {
          if (diff > 0) {
            show(idx + 1);
          } else {
            show(idx - 1);
          }
        }
      }

      // Add touch event listeners
      lbStage.addEventListener('touchstart', handleTouchStart, { passive: true });
      lbStage.addEventListener('touchmove', handleTouchMove, { passive: true });
      lbStage.addEventListener('touchend', handleTouchEnd, { passive: true });

      // Add mouse drag event listeners for desktop
      lbStage.addEventListener('mousedown', handleMouseDown);
      document.addEventListener('mousemove', handleMouseMove);
      document.addEventListener('mouseup', handleMouseUp);

      // Click events for cards
      imgs.forEach((img, i)=>{
        img.style.cursor = 'zoom-in';
        img.setAttribute('tabindex','0');
        img.addEventListener('click', ()=>open(i));
        img.addEventListener('keydown', (e)=>{ 
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            open(i);
          } 
        });
      });

      // Button events
      btnPrev.addEventListener('click', ()=>show(idx-1));
      btnNext.addEventListener('click', ()=>show(idx+1));
      btnClose.addEventListener('click', close);

      // Zoom functionality
      lbStage.addEventListener('click', (e)=> {
        if (!isDragging) {
          lbStage.classList.toggle('zoomed');
        }
      });
      
      // Prevent zoom when dragging
      lbStage.addEventListener('dblclick', (e)=> {
        if (!isDragging) {
          lbStage.classList.toggle('zoomed');
        }
      });

      // Prevent context menu on long press (mobile)
      lbStage.addEventListener('contextmenu', (e) => e.preventDefault());
    })();

    // FIXED: Clean Heart without Square Box
    document.addEventListener('DOMContentLoaded', function() {
      const heartElements = document.querySelectorAll('.heart');
      
      // Force clean heart styling
      heartElements.forEach(heart => {
        // Remove any unwanted styling
        heart.style.background = 'none';
        heart.style.border = 'none';
        heart.style.outline = 'none';
        heart.style.boxShadow = 'none';
        heart.style.padding = '0';
        heart.style.margin = '0 0.1em';
        heart.style.width = 'auto';
        heart.style.height = 'auto';
        heart.style.display = 'inline-block';
        heart.style.verticalAlign = 'baseline';
        
        // Ensure proper color
        heart.style.color = '#E76F51';
        heart.style.webkitTextFillColor = '#E76F51';
        
        // Add click handler to test heart
        heart.addEventListener('click', function() {
          console.log('Heart clicked - clean styling test');
          // Ensure clean styling on click
          this.style.background = 'none';
          this.style.border = 'none';
          this.style.outline = 'none';
          this.style.boxShadow = 'none';
        });
      });
      
      // Log heart elements for debugging
      console.log('Clean heart elements found:', heartElements.length);
    });
  </script>
</body>
</html>
